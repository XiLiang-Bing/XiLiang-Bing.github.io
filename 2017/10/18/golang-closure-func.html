<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>GoLang 闭包与匿名函数 - Bing.Go</title>
    <meta name="keywords" content="pugo,golang,xiliang,夕凉,Bing.Go"/>
    <meta name="description" content="GoLang 闭包与匿名函数简单介绍,个人笔记."/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css"/>
    <link rel="stylesheet" href="/css/prism.css"/>
    <script src="/js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">var postType = "post";</script>
</head>
<body class="post" data-perma="golang-closure-func">
<aside class="cover post" style="background: url('/media/cover.jpg') center/cover no-repeat fixed">
    <div class="profile">
        <a id="avatar-link" title="link to homepage" href="/">
            <img src="/media/author.png" alt="夕凉" class="avatar">
            <h1 id="profile-title">Bing.Go</h1>
        </a>
        <hr class="divider long">
        <p class="bio">
            弹笑间观尽青天.<br/>I love GoLang, blog based on Pugo build.
        </p>
        <hr class="divider short">
        <div class="navigation">
            <ul class="nav">
                <li role="presentation" class="">
                    <a href="/">文章
                    </a>
                </li>
                <li role="presentation" class="">
                    <a href="/archive">归档
                    </a>
                </li>
                <li role="presentation" class="">
                    <a href="/about">关于
                    </a>
                </li>
            </ul>
        </div>
        <ul class="social">
            <li><a href="/feed.xml">
                <i class="fa fa-rss"></i>
            </a></li>
        </ul>
    </div>
</aside>
<section id="main">
    <div class="container">
        <div id="article-single">
            <article class="article">
                <div class="row">
                    <header class="header">
                        <h3 class="title">
                            <a href="/2017/10/18/golang-closure-func.html">GoLang 闭包与匿名函数</a>
                        </h3>
                    </header>
                    <aside class="aside clearfix">
                        <span class="date">
                            <span class="year">2017</span>/
                            <span class="month">10</span>/
                            <span class="day">18</span>
                        </span>
                        <a class="author" href="http://pugo.io" target="_blank">夕凉</a>
                        <span class="tags">
                            <a class="tag" href="/tags/golang.html">golang</a>
                        </span>
                    </aside>
                    <section class="brief"><h4 id="golang-匿名函数">GoLang 匿名函数</h4>
<pre><code class="language-go">package main

import (
    &quot;fmt&quot;
    &quot;reflect&quot;
)

func main() {
    // 匿名函数 1
    f := func(i, j int) (result int) {
        result = i + j
        return
    } // 创建匿名函数并返回函数指针(内存地址)

    fmt.Println(f, f(1, 3))
    fmt.Println(reflect.TypeOf(f), reflect.TypeOf(f(1, 3)))

    // 匿名函数 2
    func(i, j int) {
        fmt.Println(j, i)
    }(1, 9) // 创建匿名函数并执行(函数调用)
}
</code></pre>
<pre><code>0x4965b0 4
func(int, int) int int
9 1
</code></pre>

<h4 id="golang-闭包">GoLang 闭包</h4>
<pre><code class="language-go">package main

import (
    &quot;fmt&quot;
)

func adder() func(int) int {
    sum := 0
    return func(x int) int { // 返回一个函数类型(在Go中函数也是一种变量,可以作为值或类型. 它的类型就是所有拥有相同的参数，相同的返回值的一种类型.)
        sum += x
        return sum
    }
}

func main() {
    pos, neg := adder(), adder()
    for i := 0; i &lt; 10; i++ {
        fmt.Println(pos(i), neg(-2*i))
    }
}
</code></pre>
<pre><code>0 0
1 -2
3 -6
6 -12
10 -20
15 -30
21 -42
28 -56
36 -72
45 -90
</code></pre>
</section>
                </div>
            </article>
        </div>
        
<section id="comment">
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            
            
        </div>
    </div>
</section>

        <footer id="footer">
    <div class="container text-center">
        <p class="left">© 2015 Bing.Go.
            <a href="http://creativecommons.org/licenses/by/3.0/">Some rights reserved </a> |
            <a href="/feed.xml">Feed</a> |
            <a href="/sitemap.xml">Sitemap</a>
        </p>
        <p class="right">Powered by <a href="https://github.com/go-xiaohei/pugo">PuGo 0.10.10 (beta)</a>. Theme by Uno.
        </p>
        
    
    

    </div>
</footer>
    </div>
</section>
<script src="/js/prism.min.js"></script>
<script>
    $(document).ready(function () {
        $("pre code").addClass("line-numbers")
    });
</script>
</body>
</html>
